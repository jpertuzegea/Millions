<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-12">
    <br>
    <div class="row align-items-end">


      <form (submit)="Search()" [formGroup]="form">

        <div class="col-md-2">
          <button class="btn btn-sm btn-primary pull-right m-t-n-xs" id="BotonConsultar" type="submit"><strong>Consultar</strong></button>
        </div>

        <div class="col-md-2">
          <div class="form-group">
            <label>Nombre</label>
            <input type="text" class="form-control" formControlName="Name" />
          </div>
        </div>

        <div class="col-md-3">
          <div class="form-group">
            <label>Dirección</label>
            <input type="text" class="form-control" formControlName="Address" />
          </div>
        </div>

        <div class="col-md-2">
          <div class="form-group">
            <label>Precio Min</label>
            <input type="number" class="form-control" formControlName="PriceMin" />
          </div>
        </div>

        <div class="col-md-2">
          <div class="form-group">
            <label>Precio Max</label>
            <input type="number" class="form-control" formControlName="PriceMax" />
          </div>
        </div>

      </form>

    </div>
  </div>
</div>



<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">

        <div class="ibox-title">
          <h5 align="center">Listado de Propiedades existentes en el sistema</h5>

          <div class="ibox-tools">
            <a class="collapse-link">
              <i class="fa fa-chevron-up"></i>
            </a>

            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              <i class="fa fa-wrench"></i>
            </a>

            <a class="close-link">
              <i class="fa fa-times"></i>
            </a>

          </div>
        </div>


        <div class="ibox-content">
          <div class="table-responsive">

            <table class="table table-striped table-bordered table-hover dataTables-example">
              <thead>
                <tr>

                  <th>IdProperty</th>
                  <th>Name</th>
                  <th>Address</th>
                  <th>Price</th>
                  <th>CodeInternal</th>
                  <th>Year</th>

                  <th></th>

                </tr>
              </thead>

              <tbody *ngIf="List && List?.length != 0">

                <tr *ngFor="let item of List">

                  <td> {{item.IdProperty}} </td>
                  <td> {{item.Name}} </td>
                  <td> {{item.Address}} </td>
                  <td> {{item.Price}} </td>
                  <td> {{item.CodeInternal}} </td>
                  <td> {{item.Year}} </td>

                  <td align="center">
                    <a (click)="ShowModal(true,item.IdProperty)" title="Ver Galeria" data-toggle="modal" id="{{item.IdProperty}}"><i class="fa fa-camera-retro"></i></a>
                  </td>


                </tr>

              </tbody>
              <tfoot>
                <tr>

                  <th>IdProperty</th>
                  <th>Name</th>
                  <th>Address</th>
                  <th>Price</th>
                  <th>CodeInternal</th>
                  <th>Year</th>

                  <th></th>

                </tr>
              </tfoot>
            </table>


          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal con Galería -->
<div style="overflow-y: scroll;"
     class="modal inmodal"
     id="myModal2"
     [ngClass]="{'show':showModal}"
     tabindex="-1"
     role="dialog"
     aria-hidden="true"
     data-backdrop="static"
     data-keyboard="false">

  <div class="modal-dialog">
    <div class="modal-content animated flipInY">
      <div id="contenido">

        <!-- Encabezado del modal -->
        <div class="modal-header">
          <button (click)="ShowModal(false,0)" type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
          </button>
          <h4 style="color:#1ab394" class="modal-title">Galería de Propiedad</h4>
        </div>

        <!-- Cuerpo del modal -->
        <div class="modal-body">
          <div class="ibox float-e-margins">
            <div class="ibox-title">
             
              <div class="ibox-tools">
                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                <a class="close-link"><i class="fa fa-times"></i></a>
              </div>
            </div>
            <div class="ibox-content">

              <!-- Carrusel -->
              <div id="carousel2" class="carousel slide">
                <div class="carousel-inner" *ngIf="ListPropertyImage && ListPropertyImage.length > 0">

                  <div *ngFor="let item of ListPropertyImage; let i = index"
                       class="item"
                       [class.active]="i === 0">

                    <!-- Imagen cargada desde base64 -->
                    <img alt="Imagen de propiedad"
                         class="img-responsive"
                         [src]="'data:image/jpeg;base64,' + item.Photo">

                    <!-- Texto o descripción -->
                    <div class="carousel-caption">
                      <p>{{ item.Description || ('Imagen ' + (i+1)) }}</p>
                    </div>
                  </div>
                </div>

                <!-- Controles de navegación -->
                <a data-slide="prev" href="#carousel2" class="left carousel-control">
                  <span class="icon-prev"></span>
                </a>
                <a data-slide="next" href="#carousel2" class="right carousel-control">
                  <span class="icon-next"></span>
                </a>
              </div>

            </div>
          </div>
        </div>

        <!-- Pie del modal -->
        <div class="modal-footer">
          <button class="btn btn-sm btn-secondary" (click)="ShowModal(false,0)">Cerrar</button>
        </div>

      </div>
    </div>
  </div>
</div>
